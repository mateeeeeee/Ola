import std.assert;

class Base
{
	public int GetValue() const virtual
	{
		return 1;
	}
	public int GetDoubleValue() const virtual
	{
		return GetValue() * 2;
	}
};

class Derived : Base
{
	public int GetValue() const virtual
	{
		return 10;
	}
	public int GetDoubleValue() const virtual
	{
		return GetValue() * 2;
	}
};

void TestVirtualDispatch(ref Base b, int expected)
{
	Assert(b.GetValue() == expected);
}

void TestVirtualDispatchDouble(ref Base b, int expected)
{
	Assert(b.GetDoubleValue() == expected);
}

public int main()
{
	Base b;
	Assert(b.GetValue() == 1);
	Assert(b.GetDoubleValue() == 2);
	TestVirtualDispatch(b, 1);
	TestVirtualDispatchDouble(b, 2);

	Derived d;
	Assert(d.GetValue() == 10);
	Assert(d.GetDoubleValue() == 20);
	TestVirtualDispatch(d, 10);
	TestVirtualDispatchDouble(d, 20);

	return 0;
}
