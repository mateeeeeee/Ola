import std.assert;

// Internal function called with constant 10 from ALL call sites.
// IPConstantPropagation should replace 'x' with constant 10 inside the function.
int Helper(int x, int y)
{
    return x + y;
}

// Internal function that is NEVER called.
// GlobalDeadCodeElimination should remove this.
int UnusedFunction(int a)
{
    return a * 2;
}

// Another unused internal function - should also be eliminated.
int AnotherUnused()
{
    return 42;
}

// Recursive unused function - tests that DCE handles recursive functions
int UnusedRecursive(int n)
{
    if (n <= 0) return 1;
    return n * UnusedRecursive(n - 1);
}

public int main()
{
    // All calls to Helper have 10 as first argument
    // IPCP will see that 'x' is always 10 and replace uses of 'x' with 10
    int a = Helper(10, 5);   // 10 + 5 = 15
    int b = Helper(10, 20);  // 10 + 20 = 30
    int c = Helper(10, 100); // 10 + 100 = 110

    Assert(a == 15);
    Assert(b == 30);
    Assert(c == 110);

    return 0;
}
