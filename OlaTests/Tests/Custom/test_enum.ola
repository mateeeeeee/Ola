import std.assert;

enum Color
{
    Red,
    Green,
    Blue
};

Color globalColor = Red;

// Test basic enum value assignment and comparison
void TestEnumBasic()
{
    Color c1 = Red;
    Color c2 = Green;
    Color c3 = Blue;

    Assert(c1 == Red);
    Assert(c2 == Green);
    Assert(c3 == Blue);

    // Reassignment
    c1 = Blue;
    Assert(c1 == Blue);

    // Compare two variables
    c1 = Green;
    Assert(c1 == c2);
}

public int TestEnumValues()
{
    Color color = Blue;
    Assert(color == Blue);
    return 0;
}

enum Day
{
    Monday,
    Tuesday,
    Wednesday,
    Thursday = 4,
    Friday,
    Saturday,
    Sunday
};

public int TestEnumValuesAfterModification()
{
    Day weekendDay = Sunday;
    Assert(weekendDay == Sunday);

    Day midweekDay = Wednesday;
    Assert(midweekDay == Wednesday);

    return 0;
}

public int TestEnumSwitch()
{
    Color switchColor = Green;
    int result = 0;
    
    switch (switchColor)
    {
        case Red:
            result = 1;
            break;
        case Green:
            result = 2;
            break;
        case Blue:
            result = 3;
            break;
    }
    
    Assert(result == 2);
    return 0;
}

public int TestLocalEnumDeclaration()
{
    enum Status
    {
        Active,
        Inactive,
        Pending
    };

    Status localStatus = Active;
    Assert(localStatus == Active);
    return 0;
}

// Test enum as function parameter
Color IdentityColor(Color c)
{
    return c;
}

void TestEnumFunctionParam()
{
    Color c = Green;
    Color result = IdentityColor(c);
    Assert(result == Green);

    result = IdentityColor(Blue);
    Assert(result == Blue);
}

// Test enum in conditions
void TestEnumConditions()
{
    Color c = Red;

    if (c == Red)
    {
        Assert(true);
    }
    else
    {
        Assert(false);
    }

    c = Blue;
    if (c == Red)
    {
        Assert(false);
    }
    else if (c == Green)
    {
        Assert(false);
    }
    else
    {
        Assert(true);
    }
}

// Test enum inequality
void TestEnumInequality()
{
    Color c1 = Red;
    Color c2 = Blue;

    Assert(c1 != c2);
    Assert(c1 != Green);
    Assert(c1 != Blue);

    c1 = Blue;
    Assert(c1 == c2);
}

// Test global enum
void TestGlobalEnum()
{
    Assert(globalColor == Red);

    globalColor = Blue;
    Assert(globalColor == Blue);

    globalColor = Red; // Reset
}

// Test enum in array
void TestEnumArray()
{
    Color[3] colors = {Red, Green, Blue};
    Assert(colors[0] == Red);
    Assert(colors[1] == Green);
    Assert(colors[2] == Blue);

    colors[0] = Blue;
    Assert(colors[0] == Blue);
}

// Test enum in loop
void TestEnumLoop()
{
    Color[4] palette = {Red, Green, Blue, Red};
    int redCount = 0;

    for (int i = 0; i < 4; i++)
    {
        if (palette[i] == Red)
        {
            redCount++;
        }
    }
    Assert(redCount == 2);
}

// Test enum ternary
void TestEnumTernary()
{
    Color c = Red;
    Color result = c == Red ? Green : Blue;
    Assert(result == Green);

    result = c == Blue ? Green : Red;
    Assert(result == Red);
}

public int main()
{
    TestEnumBasic();
    TestEnumValues();
    TestEnumValuesAfterModification();
    TestEnumSwitch();
    TestLocalEnumDeclaration();
    TestEnumFunctionParam();
    TestEnumConditions();
    TestEnumInequality();
    TestGlobalEnum();
    TestEnumArray();
    TestEnumLoop();
    TestEnumTernary();

    return 0;
}